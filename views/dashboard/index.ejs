<!DOCTYPE html>
<html lang="pl" class="dark-mode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Statystyki | Discord Bot List</title>
  <%- include('../partials/head.ejs') %>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css">
  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #7289da, #5b6eae);
      --card-hover-transform: translateY(-5px);
      --card-transition: all 0.3s ease;
    }
    
    .stat-card {
      border-radius: 12px;
      border: none;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      transition: var(--card-transition);
      overflow: hidden;
      background: rgba(255,255,255,0.03);
    }
    
    .stat-card:hover {
      transform: var(--card-hover-transform);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    
    .stat-icon {
      font-size: 2rem;
      margin-bottom: 1rem;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .stat-value {
      font-size: 2.2rem;
      font-weight: 700;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .progress-bar-gradient {
      background: var(--primary-gradient);
    }
    
    .badge-animated {
      transition: all 0.2s ease;
    }
    
    .badge-animated:hover {
      transform: scale(1.05);
    }
    
    .goal-item {
      position: relative;
      padding-left: 1.5rem;
      margin-bottom: 0.8rem;
      transition: all 0.3s ease;
    }
    
    .goal-item:hover {
      transform: translateX(5px);
    }
    
    .goal-item::before {
      content: "✓";
      position: absolute;
      left: 0;
      color: #7289da;
      font-weight: bold;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    @media (max-width: 768px) {
      .stats-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body class="bg-dark text-light">
  <%- include('./partials/header.ejs') %>
  <%- include('./partials/aside.ejs') %>

  <!-- Main Content -->
  <main class="docs-container pt-5 pb-3 pb-lg-4" style="padding-right: 0;">
    <div class="container-fluid px-xxl-5 px-lg-4 pt-4 pt-lg-5 pb-4">
      <!-- Page Header -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="ps-lg-2 ps-xxl-0 mt-2 mt-lg-0 pt-4 pb-2 mb-3 mb-xl-4 animate__animated animate__fadeIn">
          <i class="fas fa-chart-line me-3"></i>Statystyki Platformy
        </h1>
        <div class="text-muted">
          Ostatnia aktualizacja: <span class="text-white"><%= new Date().toLocaleString() %></span>
        </div>
      </div>

      <!-- Stats Cards Grid -->
      <div class="stats-grid animate__animated animate__fadeInUp">
        <!-- Servers Card -->
        <div class="stat-card p-4 text-center">
          <div class="stat-icon">
            <i class="fas fa-server"></i>
          </div>
          <h3 class="h5 mb-3">Serwerów</h3>
          <div class="stat-value"><%= serversdata.length ? serversdata.length.toLocaleString() : "0" %></div>
          <div class="progress mt-3" style="height: 6px;">
            <div class="progress-bar progress-bar-gradient" role="progressbar" 
                 style="width: <%= Math.min(100, (serversdata.length || 0)/500*100) %>%;" 
                 aria-valuenow="<%= serversdata.length || 0 %>" aria-valuemin="0" aria-valuemax="500"></div>
          </div>
          <small class="text-muted">Cel: 500 serwerów</small>
        </div>

        <!-- Bots Card -->
        <div class="stat-card p-4 text-center">
          <div class="stat-icon">
            <i class="fas fa-robot"></i>
          </div>
          <h3 class="h5 mb-3">Botów</h3>
          <div class="stat-value"><%= botsdata.length ? botsdata.length.toLocaleString() : "0" %></div>
          <div class="progress mt-3" style="height: 6px;">
            <div class="progress-bar progress-bar-gradient" role="progressbar" 
                 style="width: <%= Math.min(100, (botsdata.length || 0)/300*100) %>%;" 
                 aria-valuenow="<%= botsdata.length || 0 %>" aria-valuemin="0" aria-valuemax="300"></div>
          </div>
          <small class="text-muted">Cel: 300 botów</small>
        </div>

        <!-- Users Card -->
        <div class="stat-card p-4 text-center">
          <div class="stat-icon">
            <i class="fas fa-users"></i>
          </div>
          <h3 class="h5 mb-3">Użytkowników</h3>
          <div class="stat-value"><%= sbot.guilds.cache.reduce((a, g) => a + g.memberCount, 0).toLocaleString() %></div>
          <div class="progress mt-3" style="height: 6px;">
            <div class="progress-bar progress-bar-gradient" role="progressbar" 
                 style="width: <%= Math.min(100, sbot.guilds.cache.reduce((a, g) => a + g.memberCount, 0)/1000000*100) %>%;" 
                 aria-valuenow="<%= sbot.guilds.cache.reduce((a, g) => a + g.memberCount, 0) %>" aria-valuemin="0" aria-valuemax="1000000"></div>
          </div>
          <small class="text-muted">Cel: 1,000,000 użytkowników</small>
        </div>

        <!-- Owners Card -->
        <div class="stat-card p-4 text-center">
          <div class="stat-icon">
            <i class="fas fa-user-shield"></i>
          </div>
          <h3 class="h5 mb-3">Właściciele</h3>
          <div class="stat-value">
            <%= botsdata.filter(b => b.ownerID).length ? botsdata.filter(b => b.ownerID).length.toLocaleString() : "0" %>
          </div>
          <div class="mt-3">
            <span class="badge bg-primary me-2">
              <i class="fas fa-crown me-1"></i> <%= botsdata.filter(b => b.ownerID).length || 0 %>
            </span>
            <span class="badge bg-secondary">
              <i class="fas fa-users me-1"></i> <%= botsdata.reduce((c,b) => c + b.coowners.length, 0) %>
            </span>
          </div>
          <small class="text-muted">Właściciele / Współwłaściciele</small>
        </div>
      </div>

      <!-- Detailed Stats Table -->
      <div class="card border-0 shadow-sm mb-4 animate__animated animate__fadeIn">
        <div class="card-header bg-dark-2 border-0">
          <h3 class="h5 mb-0"><i class="fas fa-table me-2"></i>Szczegółowe Statystyki</h3>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-dark table-hover mb-0">
              <thead class="bg-dark-3">
                <tr>
                  <th width="50px"></th>
                  <th>Kategoria</th>
                  <th>Wartość</th>
                  <th>Trend</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><i class="fas fa-server text-primary"></i></td>
                  <td>Aktywne Serwery</td>
                  <td><%= serversdata.length ? serversdata.length.toLocaleString() : "0" %></td>
                  <td><span class="text-success"><i class="fas fa-arrow-up"></i> +5%</span></td>
                </tr>
                <tr>
                  <td><i class="fas fa-robot text-info"></i></td>
                  <td>Zarejestrowane Boty</td>
                  <td><%= botsdata.length ? botsdata.length.toLocaleString() : "0" %></td>
                  <td><span class="text-success"><i class="fas fa-arrow-up"></i> +8%</span></td>
                </tr>
                <tr>
                  <td><i class="fas fa-user-shield text-warning"></i></td>
                  <td>Właściciele Botów</td>
                  <td><%= botsdata.filter(b => b.ownerID).length ? botsdata.filter(b => b.ownerID).length.toLocaleString() : "0" %></td>
                  <td><span class="text-success"><i class="fas fa-arrow-up"></i> +3%</span></td>
                </tr>
                <tr>
                  <td><i class="fas fa-users text-success"></i></td>
                  <td>Użytkownicy na Serwerach</td>
                  <td><%= sbot.guilds.cache.reduce((a, g) => a + g.memberCount, 0).toLocaleString() %></td>
                  <td><span class="text-success"><i class="fas fa-arrow-up"></i> +12%</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Badges Section -->
      <section class="card border-0 shadow-sm mb-4 animate__animated animate__fadeIn">
        <div class="card-header bg-dark-2 border-0">
          <h2 class="h4 mb-0"><i class="fas fa-award me-2"></i>Dostępne Odznaki</h2>
        </div>
        <div class="card-body">
          <div class="d-flex flex-wrap gap-2">
            <span class="badge bg-faded-warning text-warning badge-animated">
              <i class="fas fa-star me-1"></i> Promowany
            </span>
            <span class="badge bg-faded-primary text-primary badge-animated">
              <i class="fas fa-trophy me-1"></i> TOP!
            </span>
            <span class="badge bg-faded-success text-success badge-animated">
              <i class="fas fa-bolt me-1"></i> NOWY!
            </span>
            <span class="badge bg-faded-info text-info badge-animated">
              <i class="fas fa-thumbs-up me-1"></i> Głosów: 0
            </span>
            <span class="badge bg-secondary badge-animated">
              <i class="fas fa-tag me-1"></i> Tagi
            </span>
            <span class="badge bg-faded-danger text-danger badge-animated">
              <i class="fas fa-heart me-1"></i> Ulubione
            </span>
            <span class="badge bg-faded-purple text-purple badge-animated">
              <i class="fas fa-check-circle me-1"></i> Zweryfikowany
            </span>
          </div>
        </div>
      </section>

      <!-- Alerts Section -->
      <section class="card border-0 shadow-sm mb-4 animate__animated animate__fadeIn">
        <div class="card-header bg-dark-2 border-0">
          <h2 class="h4 mb-0"><i class="fas fa-bell me-2"></i>Przykładowe Powiadomienia</h2>
        </div>
        <div class="card-body">
          <div class="alert alert-danger d-flex align-items-center animate__animated animate__headShake" role="alert">
            <i class="fas fa-exclamation-circle me-2"></i>
            <div>Błąd! Coś poszło nie tak podczas przetwarzania żądania.</div>
          </div>
          <div class="alert alert-success d-flex align-items-center animate__animated animate__pulse" role="alert">
            <i class="fas fa-check-circle me-2"></i>
            <div>Sukces! Operacja została wykonana pomyślnie.</div>
          </div>
          <div class="alert alert-info d-flex align-items-center" role="alert">
            <i class="fas fa-info-circle me-2"></i>
            <div>Informacja: System został zaktualizowany do najnowszej wersji.</div>
          </div>
        </div>
      </section>

      <!-- Goals Section -->
      <section class="card border-0 shadow-sm animate__animated animate__fadeIn">
        <div class="card-header bg-dark-2 border-0">
          <h2 class="h3 mb-0"><i class="fas fa-bullseye me-2"></i>Nasze Cele</h2>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <ul class="list-unstyled">
                <li class="goal-item">Być przyjazną społecznością dla wszystkich</li>
                <li class="goal-item">Zwiększyć liczbę serwerów i botów na stronie</li>
                <li class="goal-item">Zachęcać do bumpowania i promowania</li>
              </ul>
            </div>
            <div class="col-md-6">
              <ul class="list-unstyled">
                <li class="goal-item">Dostarczać wartościowe funkcje dla użytkowników</li>
                <li class="goal-item">Tworzyć przejrzysty i przyjazny interfejs</li>
                <li class="goal-item">Rozwijać platformę zgodnie z potrzebami społeczności</li>
              </ul>
            </div>
          </div>
          <div class="mt-4 text-center">
            <div class="progress" style="height: 10px;">
              <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 65%;" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <small class="text-muted">Postęp w realizacji celów: 65%</small>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    // Simple animation trigger
    document.addEventListener('DOMContentLoaded', function() {
      const elements = document.querySelectorAll('.stat-card, .card');
      elements.forEach((el, index) => {
        setTimeout(() => {
          el.style.opacity = 1;
        }, 100 * index);
      });
    });
  </script>
</body>
</html>
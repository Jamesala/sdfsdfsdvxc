<!DOCTYPE html>
    <html lang="pl">
    <head>
      <title>Polskie Serwery Discord - Discordzik.pl</title>
      <link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon">
      <link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon">
      <meta http-equiv="content-type" content="text/html;charset=utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="Dołącz do najlepszych polskich serwerów Discord na Discordzik.pl. Znajdź społeczności gamingowe, tematyczne i promuj swój serwer!">
      <meta name="keywords" content="discordzik, polskie discordy, polskie boty discord, fortnite polska discord, serwery Discord, najlepsze serwery Discord, społeczności Discord, serwery gamingowe, promuj serwer Discord, fortnite discord Polska, alternatywa dla disboard, jak promować serwer Discord, gry na Discordzie, discord Among Us Polska, discord randki, serwery Discord Ark, polski Discord, serwery Discord 2025, dodaj serwer Discord">
      <meta name="theme-color" content="#5024f3">
      <meta name="robots" content="index, follow">
      <meta name="google-adsense-account" content="ca-pub-9136474966764887">
      <meta name="monetag" content="d3dd2bca9e602899e10b67bd13168aa5">

      <!-- Preload critical resources -->
      <link rel="preload" href="/assets/img/banner.png" as="image">
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
      <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
      <link rel="preconnect" href="https://unpkg.com" crossorigin>

      <!-- CSS - przywracamy main.css z oryginalnej wersji -->
      <link rel="stylesheet" href="/assets/css/main.css">
      <link rel="stylesheet" href="/assets/css/widget.css">
      <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
      <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
      <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css">

      <!-- Inline critical CSS -->
      <style>
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          margin: 0;
          padding: 0;
          background-color: #20232a;
          color: #fff;
        }
        .container {
          padding: 1rem;
        }
        a {
          color: #8b5cf6;
          text-decoration: none;
        }
      </style>

      <!-- Fonts - jak w oryginalnej wersji -->
      <link rel="preload" href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
      <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap"></noscript>

      <!-- Open Graph Meta Tags -->
      <meta property="og:site_name" content="Discordzik.pl">
      <meta property="og:type" content="website">
      <meta property="og:url" content="https://discordzik.pl/">
      <meta property="og:title" content="Polskie Serwery Discord - Discordzik.pl">
      <meta property="og:description" content="Dołącz do najlepszych polskich serwerów Discord na Discordzik.pl. Znajdź społeczności gamingowe, tematyczne i promuj swój serwer!">
      <meta property="og:image" content="https://discordzik.pl/assets/img/banner.png?v=3">
      <meta property="og:image:secure_url" content="https://discordzik.pl/assets/img/banner.png?v=3">
      <meta property="og:image:width" content="1200">
      <meta property="og:image:height" content="630">
      <meta property="og:image:type" content="image/png">

      <!-- Twitter Card Meta Tags -->
      <meta property="twitter:card" content="summary_large_image">
      <meta property="twitter:url" content="https://discordzik.pl/">
      <meta property="twitter:title" content="Polskie Serwery Discord - Discordzik.pl">
      <meta property="twitter:description" content="Dołącz do najlepszych polskich serwerów Discord na Discordzik.pl. Znajdź społeczności gamingowe, tematyczne i promuj swój serwer!">
      <meta property="twitter:image" content="https://discordzik.pl/assets/img/banner.png?v=3">
      <meta property="twitter:image:width" content="1200">
      <meta property="twitter:image:height" content="630">

      <!-- JSON-LD Structured Data -->
      <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Polskie Serwery Discord",
        "description": "Znajdź najlepsze polskie serwery Discord na Discordzik.pl! Serwery społecznościowe, gamingowe, tematyczne i więcej. Dołącz do aktywnych społeczności już teraz!",
        "url": "https://discordzik.pl/",
        "image": "/assets/img/banner.png"
      }
      </script>

      <!-- Async script loading - jak w oryginalnej wersji -->
      <script>
        function loadScript(src, integrity, crossorigin, defer) {
          var script = document.createElement('script');
          script.src = src;
          if (integrity) script.integrity = integrity;
          if (crossorigin) script.crossOrigin = crossorigin;
          if (defer) script.defer = true;
          document.head.appendChild(script);
        }
      </script>
    </head>

    <%- include('partials/head') %>

    <body>
      <%- include('partials/spinner') %>
      <main class="page-wrapper border-bottom">
        <%- include('partials/header') %>

        <!-- Hero Section -->
        <section class="position-relative py-5 bg-dark text-white">
          <div class="position-absolute top-0 start-0 w-100 h-100 bg-gradient-primarys">
            <div class="animated-balls"></div>
          </div>
          <div class="container position-relative zindex-2 py-lg-2 text-center">
            <div class="d-flex flex-column pt-lg-4">
              <h5 class="my-2 text-uppercase">Discordzik.pl</h5>
              <h1 class="display-3 fw-bold mb-4">Znajdź Polskie Serwery Discord</h1>
              <p class="fs-lg mb-5">
                Dołącz do najlepszych <a href="/servers">społeczności Discord</a> w Polsce. Odkryj serwery gamingowe, tematyczne i więcej!
              </p>

              <!-- Search Container -->
      <div class="discordzik-search-container mx-auto mb-4" style="max-width: 100%; width: 800px;">
        <div class="input-group shadow-lg">
          <input class="form-control discordzik-search-input" type="text" id="searchServer" 
                 placeholder="Wpisz nazwę serwera, tag lub kategorię..." 
                 aria-label="Szukaj serwera" autocomplete="off">
          <button class="btn btn-secondary discordzik-filters-btn" type="button" id="filtersToggleBtn">
            <i class="fas fa-filter me-2"></i> <span class="d-none d-md-inline">Filtry</span>
          </button>
          <button class="btn btn-primary discordzik-search-btn" type="button" id="searchServerBtn">
            <i class="fas fa-search me-2"></i> Szukaj
          </button>
        </div>
        <div class="discordzik-suggestions-box mt-2 text-start bg-dark rounded p-2 d-none" id="searchSuggestions"></div>

        <!-- Filters Panel -->
        <div class="discordzik-filters-panel mt-3 d-none" id="filtersPanel">
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label text-white">Liczba członków:</label>
              <select class="form-select discordzik-filter-select" id="membersFilter">
                <option value="">Wszystkie</option>
                <option value="small">1-100 członków</option>
                <option value="medium">100-500 członków</option>
                <option value="large">500-1000 członków</option>
                <option value="huge">1000+ członków</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label text-white">Sortowanie:</label>
              <select class="form-select discordzik-filter-select" id="sortFilter">
                <option value="votes">Według głosów</option>
                <option value="members">Według członków</option>
                <option value="newest">Najnowsze</option>
                <option value="oldest">Najstarsze</option>
                <option value="name">Według nazwy</option>
              </select>
            </div>
            <div class="col-12">
              <label class="form-label text-white">Tagi (wybierz maksymalnie 3):</label>
              <div class="discordzik-tags-container d-flex flex-wrap gap-2">
                <% const popularFilterTags = ['Anime', 'Minecraft', 'Fortnite', 'Gry', 'Rozrywka', 'E-Sport', 'LGBT', 'Technologia', 'Społeczność', 'Horror', 'Hobby', 'League of Legends', 'Valorant', 'CS2', 'Genshin Impact', 'Among Us', 'Discord']; %>
                <% popularFilterTags.forEach(tag => { %>
                <button type="button" class="btn btn-outline-light btn-sm discordzik-tag-filter" data-tag="<%= tag %>">
                  <%= tag %>
                </button>
                <% }); %>
              </div>
            </div>
            <div class="col-12 text-center">
              <button type="button" class="btn btn-success me-2" id="applyFiltersBtn">
                <i class="fas fa-check me-2"></i> Zastosuj filtry
              </button>
              <button type="button" class="btn btn-outline-light" id="clearFiltersBtn">
                <i class="fas fa-times me-2"></i> Wyczyść
              </button>
            </div>
          </div>
        </div>
      </div>

              <div id="searchResults" class="mt-4"></div>

    <!-- Tags Section -->
    <div class="tags-section my-4">
      <h4 class="text-uppercase mb-3">Popularne Tagi:</h4>
      <div class="d-flex justify-content-center flex-wrap gap-2">
        <% serverTags.slice(0, 9).forEach(tag => { %>
          <a href="/servers/<%= tag.tag %>" class="badge text-decoration-none text-white py-2 px-3 discordzik-hover-scale"
             style="background: rgba(var(--si-primary-rgb), var(--si-bg-opacity)) !important; backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 10px; transition: transform 0.3s, background 0.3s;">
            <%= tag.tag %> (<%= tag.count %>)
          </a>
        <% }); %>
      </div>
    </div>

              <span class="fs-sm">
                Łączymy <span class="text-primary fw-semibold" id="user-count">800 000+</span> osób na serwerach Discord!
              </span>

              <div class="mt-3 trực tiếp bóng đá k+pm d-flex justify-content-center gap-3 flex-wrap">
                <a href="/servers/new" class="btn btn-success mb-3 discordzik-hover-scale" id="addServerBtn">
                  <i class="fas fa-plus me-2"></i> Dodaj serwer
                </a>
                <a href="/bots/new" class="btn btn-success mb-3 discordzik-hover-scale" id="addBotBtn">
                  <i class="fas fa-plus me-2"></i> Dodaj bota
                </a>
              </div>

          <!-- Carousel -->
          <div class="discordzik-carousel-container d-flex align-items-center justify-content-center mb-5 overflow-hidden">
            <div class="discordzik-carousel d-flex discordzik-animate-slide">
              <% for (let i = 0; i < 15; i++) { %>
              <div class="discordzik-avatar-container mx-2 discordzik-hover-scale"
                   style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 50%; padding: 5px;">
                <% const user = bot.users.cache.filter(u => !u.bot && u.avatar).random(); %>
                <img src="<%= user.displayAvatarURL({ format: 'png', size: 128 }) %>" 
                     alt="Awatar użytkownika <%= user.username %> na Discord6500 na Discordzie"
                     class="rounded-circle discordzik-avatar-img" style="width: 60px; height: 60px;" loading="lazy">
              </div>
              <% } %>
            </div>
          </div>
        </div>
      </div>
        </section>

        <!-- Promo Section -->
        <section class="container py-3">
          <div id="promoPlaceholder"></div>
        </section>

        <!-- Promoted Servers Section -->
        <section class="container">
      <h2 class="h2 text-left">
        <i class='bx bxs-star text-warning'></i> Promowane Serwery
      </h2>
          <span class="fs-sm text-left d-block mb-3">Serwery, które wspierają nas.</span>
          <div class="slider" id="bot-cards-wrapper">
            <!-- Server cards generated by bot-cards.js -->
          </div>
        </section>

        <!-- Recently Voted Servers Section -->
        <section class="container text-center">
          <div class="py-2">
            <h2 class="H2 text-center"><i class='bx bxs-time text-primary'></i> Ostatnio Zagłosowane Serwery</h2>
            <span class="fs-sm text-center d-block mb-3">Serwery Discord, na które ostatnio oddano głos</span>
            <div class="server-cards-wrapper">
              <% servers.filter(a => !a.tags.includes('NSFW')).map((a, index) => { %>
              <a href="/server/<%= a.serverID %>" class="server-card-link">
                <div class="server-card"
                  style="
                    position: relative;
                    overflow: hidden;
                    <% if (a.customBannerURL) { %>
                      background: url('<%= a.customBannerURL %>') center center / cover no-repeat;
                    <% } else if (sbot.guilds.cache.get(a.serverID)?.splashURL()) { %>
                      background: url('<%= sbot.guilds.cache.get(a.serverID).splashURL({ size: 1024 }) %>') center center / cover no-repeat;
                    <% } %>
                  ">
                  <% if (a.customBannerURL || sbot.guilds.cache.get(a.serverID)?.splashURL()) { %>
                    <div style="
                      position: absolute;
                      top: 0;
                      left: 0;
                      width: 100%;
                      height: 100%;
                      background-color: rgba(0, 0, 0, 0.8);
                    "></div>
                  <% } %>
                  <div class="member-count-badge" style="position: absolute; top: 10px; right: 10px; z-index: 2;">
                    <i class="bx bx-server"></i>
                    <span><%= sbot.guilds.cache.get(a.serverID)?.memberCount.toLocaleString() || 'X=Brak opisu' %></span>
                  </div>
                  <div style="position: relative; z-index: 1; height: 100%; display: flex; flex-direction: column;">
                    <div style="flex: 1; display: flex; justify-content: center; align-items: center; padding-top: 30px;">
                      <img src="<%= sbot.guilds.cache.get(a.serverID)?.iconURL({ size: 256 }) || 'https://cdn.discordapp.com/embed/avatars/0.png' %>" 
                           alt="Ikona serwera Discord <%= sbot.guilds.cache.get(a.serverID)?.name || 'Nieznany' %>"
                           class="<%= a.status === 'PRO' ? 'pro-border' : a.status === 'GOLD' ? 'gold-border' : a.status === 'BASIC' ? 'basic-border' : '' %>"
                           style="width: 100px; height: 100px; object-fit: cover; border-radius: 50%; border: 3px solid <%= a.status === 'PRO' ? '#ff9a3e' : a.status === 'GOLD' ? '#ffd700' : a.status === 'BASIC' ? '#3a86ff' : '#6c757d' %>;"
                           loading="lazy">
                    </div>
                    <div class="server-info">
                      <h6 style="margin-bottom: 8px; font-size: 16px;"><%= sbot.guilds.cache.get(a.serverID)?.name || 'Nieznany' %></h6>
                      <p class="server-description" style="margin-bottom: 8px; font-size: 12px; height: 40px; overflow: hidden;"><%= a.shortDesc || 'Brak opisu' %></p>
                      <div class="tag-container" style="margin-bottom: 10px;">
                        <% a.tags.slice(0, 3).map(t => { %>
                          <span class="badge" style="margin: 2px; font-size: 10px;"><%= t %></span>
                        <% }) %>
                      </div>
                    </div>
                    <div class="server-badge-container" style="margin-top: auto;">
                      <% if (a.status === 'PRO') { %>
                        <span class="server-badge badge-promoted" style="display: inline-block; margin: 2px; font-size: 10px;">
                          <i class="fas fa-star"></i> PRO
                        </span>
                      <% } %>
                      <% if (a.status === 'GOLD') { %>
                        <span class="server-badge badge-top" style="display: inline-block; margin: 2px; font-size: 10px;">
                          <i class="fas fa-crown"></i> GOLD
                        </span>
                      <% } %>
              <% if (a.status === 'BASIC') { %>
                        <span class="server-badge badge-basic" style="display: inline-block; margin: 2px; font-size: 10px;">
                          <i class="fas fa-rocket"></i> BASIC
                        </span>
                      <% } %>
                      <% if (a.votes >= 300) { %>
                        <span class="server-badge badge-high-votes" style="display: inline-block; margin: 2px; font-size: 10px;">
                          <i class="fas fa-heart"></i> ULUBIONE
                        </span>
                      <% } %>
                      <% if (a.isActive && a.activityLevel >= 1) { %>
                        <span class="server-badge badge-active" style="display: inline-block; margin: 2px; font-size: 10px;">
                          <i class="fas fa-bolt"></i> AKTYWNY
                        </span>
                      <% } %>
                      <% const createdDate = a.Date && !isNaN(new Date(a.Date)) ? new Date(a.Date) : new Date();
                         const daysSinceCreation = Math.floor((Date.now() - createdDate) / (1000 * 60 * 60 * 24));
                         if (daysSinceCreation <= 7) { %>
                        <span class="server-badge badge-new" style="display: inline-block; margin: 2px; font-size: 10px;">
                          <i class="fas fa-certificate"></i> NOWY
                        </span>
                      <% } %>
                    </div>
                  </div>
                </div>
              </a>
              <% }) %>
            </div>
          </div>
          <a href="/servers" class="btn btn-outline-primary my-1 mb-3 w-100" type="button"> Zobacz wszystkie</a>
        </section>

        <!-- Second Promo Section -->
        <section class="container py-3">
          <div id="promoPlaceholder2"></div>
        </section>

        <!-- FAQ Section -->
        <section class="container py-5 mb-lg-2">
          <h2 class="h2 text-center pb-4">Często Zadawane Pytania</h2>
          <hr class="mx-auto" style="max-width: 60px;">
          <div class="py-2 py-md-4 py-lg-5">
            <div class="accordion" id="faq">
              <div class="accordion-item border-0 rounded-3 shadow-sm mb-3">
                <h2 class="accordion-header" id="q1-heading">
                  <button class="accordion-button shadow-none rounded-3 collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#q1" aria-expanded="true" aria-controls="q1">
                    Co to jest Discordzik.pl?
                  </button>
                </h2>
                <div id="q1" class="accordion-collapse collapse" aria-labelledby="q1-heading" data-bs-parent="#faq">
                  <div class="accordion-body fs-sm pt-0">
                    <p>Discordzik.pl to platforma, która gromadzi polskie serwery i boty Discord. Umożliwiamy użytkownikom znalezienie i dołączenie do serwerów tematycznych, gamingowych, edukacyjnych i wielu innych.</p>
                  </div>
                </div>
              </div>
              <div class="accordion-item border-0 rounded-3 shadow-sm mb-3">
                <h2 class="accordion-header" id="q3-heading">
                  <button class="accordion-button shadow-none rounded-3 collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#q3" aria-expanded="true" aria-controls="q3">
                    Czy korzystanie z Discordzik.pl jest darmowe?
                  </button>
                </h2>
                <div id="q3" class="accordion-collapse collapse" aria-labelledby="q3-heading" data-bs-parent="#faq">
                  <div class="accordion-body fs-sm pt-0">
                    <p>Tak, korzystanie z naszej strony jest całkowicie darmowe. Możesz przeglądać i dołączać do serwerów bez żadnych opłat.</p>
                  </div>
                </div>
              </div>
              <div class="accordion-item border-0 rounded-3 shadow-sm mb-3">
                <h2 class="accordion-header" id="q2-heading">
                  <button class="accordion-button shadow-none rounded-3 collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#q2" aria-expanded="false" aria-controls="q2">
                    Jak mogę dodać mój serwer lub bota do listy?
                  </button>
                </h2>
                <div id="q2" class="accordion-collapse collapse" aria-labelledby="q2-heading" data-bs-parent="#faq">
                  <div class="accordion-body fs-sm pt-0">
                    <p>Idź do <a href="/bots/new">dodaj bota</a> lub <a href="/servers/new">dodaj serwer</a> i wypełnij formularz informacjami. Po wysłaniu formularza nasz zespół sprawdzi i zatwierdzi go.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="cta-bg-wrapper">
            <div class="container">
              <div class="cta-card">
                <div class="cta-content">
                  <h2 class="cta-title">Gotowy na rozwój swojego serwera?</h2>
                  <p class="cta-text">Wznieś swój serwer Discord na wyższy poziom!</p>
                  <div class="cta-buttons">
                    <a href="/servers/new" class="btn btn-primary btn-lg">Dodaj serwer</a>
                    <a href="/boost" class="btn btn-outline-light btn-lg">Odkryj Boost</a>
                  </div>
                </div>
                <div class="cta-image">
                  <div class="mascot-float">
                    <img src="https://discordzik.pl/assets/img/dzikibalon.png" 
                         alt="Maskotka Discordzik.pl" 
                         class="floating-emoji" 
                         loading="lazy">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>

      <%- include('partials/footer') %>

    <!-- Widget z niespodzianką -->
    <div class="surprise-widget" id="surpriseWidget">
      <div class="logo-container">
        <div class="logo-half"></div>
      </div>
    </div>

    <!-- Dymek -->
    <div class="speech-bubble" id="speechBubble">
      <button class="close-btn" onclick="closeSpeechBubble()">&times;</button>
      <div class="bubble-content">
        <div class="bubble-title">Zaskoczyć cię?</div>
        <button class="surprise-btn" onclick="surpriseMe()" id="surpriseBtn">
          TAK
        </button>
      </div>
    </div>

      <!-- Scripts - dokładnie jak w oryginalnej wersji -->
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
      <script src="/assets/js/bot-cards.js" onerror="this.src='/assets/js/bot-cards-fallback.js'"></script>
      <script src="https://www.googletagmanager.com/gtag/js?id=G-LKN9HV310X" defer></script>
      <script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9136474966764887" crossorigin="anonymous" defer></script>
      <script src="//cdn.iubenda.com/cs/iubenda_cs.js" crossorigin="anonymous" defer></script>

      <!-- Google Tag Manager -->
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-LKN9HV310X');
      </script>

      <!-- Animated balls -->
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const container = document.querySelector('.animated-balls');
          const colors = ['#6366f1', '#8b5cf6', '#d946ef'];
          const ballCount = 8;
          for (let i = 0; i < ballCount; i++) {
            const ball = document.createElement('div');
            ball.className = 'ball';
            const size = Math.random() * 200 + 100;
            const x = Math.random() * 100;
            const y = Math.random() * 100;
            const color = colors[Math.floor(Math.random() * colors.length)];
            const duration = Math.random() * 10 + 10;
            const delay = Math.random() * 5;
            ball.style.width = `${size}px`;
            ball.style.height = `${size}px`;
            ball.style.left = `${x}%`;
            ball.style.top = `${y}%`;
            ball.style.background = color;
            ball.style.animation = `float ${duration}s infinite ${delay}s, colorChange ${duration * 1.5}s infinite ${delay}s`;
            container.appendChild(ball);
          }
        });
      </script>

      <!-- Search functionality -->
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const searchInput = document.getElementById('searchServer');
          const searchBtn = document.getElementById('searchServerBtn');
          const searchResults = document.getElementById('searchResults');
          const suggestionsBox = document.getElementById('searchSuggestions');

          function clearResults() {
            searchResults.innerHTML = '';
            suggestionsBox.classList.add('d-none');
          }

          function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
              const j = Math.floor(Math.random() * (i + 1));
              [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
          }

          async function handleSearch() {
            const query = searchInput.value.trim();
            clearResults();
            if (query.length < 2) {
              searchResults.innerHTML = `
                <div class="alert alert-warning">
                  <i class="fas fa-exclamation-circle me-2"></i>
                  Wpisz co najmniej 2 znaki
                </div>
              `;
              return;
            }
            const originalBtnContent = searchBtn.innerHTML;
            searchBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status"></span> Szukanie...';
            searchBtn.disabled = true;
            try {
              const response = await fetch(`/servers/find`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ query: query })
              });
              if (!response.ok) {
                throw new Error(response.status === 429 
                  ? 'Za dużo prób wyszukiwania. Spróbuj za chwilę.' 
                  : 'Błąd odpowiedzi serwera');
              }
              const data = await response.json();
              if (data.error) {
                throw new Error(data.message);
              }
              if (data.servers && data.servers.length > 0) {
                data.servers = shuffleArray(data.servers);
              }
              displayResults(data);
            } catch (error) {
              console.error('Search error:', error);
              searchResults.innerHTML = `
                <div class="alert alert-danger">
                  <i class="fas fa-exclamation-triangle me-2"></i>
                  ${error.message || 'Wystąpił błąd podczas wyszukiwania'}
                </div>
              `;
            } finally {
              searchBtn.innerHTML = '<i class="fas fa-search me-2"></i> Szukaj';
              searchBtn.disabled = false;
            }
          }

          function displayResults(data) {
            if (!data.servers || data.servers.length === 0) {
              searchResults.innerHTML = `
                <div class="alert alert-info">
                  <i class="fas fa-info-circle me-2"></i>
                  Nie znaleziono serwerów pasujących do wyszukiwania.
                  <div class="mt-2">
                    <a href="/servers/new" class="btn btn-sm btn-outline-light">Dodaj swój serwer</a>
                  </div>
                </div>
              `;
              return;
            }
            let html = `
              <div class="row g-4">
                <div class="col-12">
                  <h4 class="text-start">Znalezione serwery (${data.servers.length})</h4>
                </div>
            `;
            data.servers.forEach(server => {
              const isPro = server.status === 'PRO';
              const isGold = server.status === 'GOLD';
          const isBasic = server.status === 'BASIC';
              const isNsfw = server.tags?.includes('NSFW');
              html += `
                <div class="col-md-6 col-lg-4">
                  <a href="/server/${server.serverID}" class="text-decoration-none">
                    <div class="discordzik-server-card position-relative">
                      ${isPro ? `<span class="badge discordzik-badge-top-left discordzik-badge-pro"><i class="fas fa-star"></i></span>` : ''}
                      ${isGold ? `<span class="badge discordzik-badge-top-left discordzik-badge-gold"><i class="fas fa-crown"></i></span>` : ''}
              ${isBasic ? `<span class="badge discordzik-badge-top-left discordzik-badge-basic"><i class="fas fa-rocket"></i></span>` : ''}
                      ${isNsfw ? `<span class="badge discordzik-badge-top-left discordzik-badge-nsfw">NSFW</span>` : ''}
                      <div class="p-3">
                        <div class="d-flex align-items-center">
                          <img src="${server.icon || 'https://cdn.discordapp.com/embed/avatars/0.png'}" 
                               class="discordzik-server-icon me-3"
                               alt="Ikona serwera Discord ${server.name}"
                               loading="lazy">
                          <div class="flex-grow-1">
                            <h5 class="discordzik-server-name text-white">${server.name}</h5>
                            <p class="discordzik-server-desc">${server.shortDesc || 'Brak opisu'}</p>
                          </div>
                        </div>
                        ${server.tags?.length ? `
                        <div class="tag-containers d-flex flex-wrap justify-content-center align-items-center gap-1 mt-2 ps-0">
                          ${server.tags.slice(0, 3).map(tag => `
                            <span class="badge bg-primary">${tag}</span>
                          `).join('')}
                        </div>
                        ` : ''}
                        <div class="d-flex justify-content-between align-items-center mt-3">
                          <span class="badge bg-info">
                            <i class="fas fa-thumbs-up me-1"></i> ${server.votes || 0}
                          </span>
                        </div>
                      </div>
                    </div>
                  </a>
                </div>
              `;
            });
            html += `</div>`;
            searchResults.innerHTML = html;
          }

          function fetchSuggestions(query) {
            if (query.length < 1) {
              suggestionsBox.classList.add('d-none');
              return;
            }
            const popularTags = [
              'Anime', 'Minecraft', 'Fortnite', 'NSFW', 'Gry', 'Rozrywka', 'E-Sport', 
              'Cutecore', 'SFW', 'LGBT', 'Randki', 'Religia', 'Memy', 'Furry', 'Roleplay',
              'Technologia', 'Społeczność', 'Filozofia', 'Horror', 'Autyzm', 'Hobby', 'Biznes',
              'Wsparcie', 'Kultura', 'Protest', 'Chatowanie', 'Higurashi', 'Wrestling',
              'League of Legends', 'Valorant', 'CS2', 'Dota 2', 'Roblox', 'Genshin Impact',
              'Honkai Star Rail', 'Call of Duty', 'Overwatch 2', 'Apex Legends', 'PUBG',
              'Baldur\'s Gate 3', 'Cyberpunk 2077', 'The Witcher', 'Elden Ring', 'Dark Souls',
              'GTA V', 'GTA RP', 'Rocket League', 'Among Us', 'Valheim', 'Stardew Valley',
              'Terraria', 'World of Warcraft', 'FFXIV', 'OSU!', 'Dead by Daylight',
              'Phasmophobia', 'FNAF', 'Dragon Ball', 'Pokémon', 'Geometry Dash'
            ];
            const filteredTags = popularTags.filter(tag => 
              tag.toLowerCase().includes(query.toLowerCase())
            ).slice(0, 5);
            if (filteredTags.length > 0) {
              suggestionsBox.innerHTML = filteredTags.map(tag => `
                <div class="discordzik-suggestion-item" data-suggestion="${tag.replace(/"/g, '&quot;')}">
                  <i class="fas fa-tag me-2"></i> ${tag}
                </div>
              `).join('');
              suggestionsBox.innerHTML += `
                <div class="discordzik-suggestion-item" data-suggestion="${query.replace(/"/g, '&quot;')}">
                  <i class="fas fa-search me-2"></i> Szukaj "${query}"
                </div>
              `;
              suggestionsBox.classList.remove('d-none');
              document.querySelectorAll('.discordzik-suggestion-item').forEach(item => {
                item.addEventListener('click', function() {
                  const suggestion = this.getAttribute('data-suggestion');
                  searchInput.value = suggestion;
                  suggestionsBox.classList.add('d-none');
                  handleSearch();
                });
              });
            } else {
              suggestionsBox.innerHTML = `
                <div class="discordzik-suggestion-item" data-suggestion="${query.replace(/"/g, '&quot;')}">
                  <i class="fas fa-search me-2"></i> Szukaj "${query}"
                </div>
              `;
              suggestionsBox.classList.remove('d-none');
              document.querySelector('.discordzik-suggestion-item').addEventListener('click', function() {
                const suggestion = this.getAttribute('data-suggestion');
                searchInput.value = suggestion;
                suggestionsBox.classList.add('d-none');
                handleSearch();
              });
            }
          }

          // Event listeners
      searchBtn.addEventListener('click', () => {
        if (selectedTags.length > 0 || document.getElementById('membersFilter').value || document.getElementById('sortFilter').value !== 'votes') {
          handleSearchWithFilters();
        } else {
          handleSearch();
        }
      });
      searchInput.addEventListener('input', () => fetchSuggestions(searchInput.value.trim()));
      searchInput.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') handleSearch();
      });

      // Zamknij podpowiedzi po kliknięciu gdzie indziej
      document.addEventListener('click', (e) => {
        if (!searchInput.contains(e.target) && !suggestionsBox.contains(e.target)) {
          suggestionsBox.classList.add('d-none');
        }
      });

      // Filters functionality
      const filtersToggleBtn = document.getElementById('filtersToggleBtn');
      const filtersPanel = document.getElementById('filtersPanel');
      const applyFiltersBtn = document.getElementById('applyFiltersBtn');
      const clearFiltersBtn = document.getElementById('clearFiltersBtn');
      const tagFilters = document.querySelectorAll('.discordzik-tag-filter');

      let selectedTags = [];
      let activeFilters = {
        members: '',
        sort: 'votes',
        tags: []
      };

      // Toggle filters panel
      filtersToggleBtn.addEventListener('click', () => {
        const isHidden = filtersPanel.classList.contains('d-none');
        if (isHidden) {
          filtersPanel.classList.remove('d-none');
          filtersToggleBtn.classList.add('active');
        } else {
          filtersPanel.classList.add('d-none');
          filtersToggleBtn.classList.remove('active');
        }
      });

      // Tag selection
      tagFilters.forEach(tagBtn => {
        tagBtn.addEventListener('click', () => {
          const tag = tagBtn.dataset.tag;

          if (selectedTags.includes(tag)) {
            // Remove tag
            selectedTags = selectedTags.filter(t => t !== tag);
            tagBtn.classList.remove('active');
          } else if (selectedTags.length < 3) {
            // Add tag (max 3)
            selectedTags.push(tag);
            tagBtn.classList.add('active');
          } else {
            // Show warning
            alert('Możesz wybrać maksymalnie 3 tagi');
          }
        });
      });

      // Apply filters
      applyFiltersBtn.addEventListener('click', () => {
        // Build search query
        let query = searchInput.value.trim();

        if (query.length >= 2 || selectedTags.length > 0) {
          handleSearchWithFilters();
        } else {
          alert('Wpisz co najmniej 2 znaki lub wybierz tagi');
        }

        filtersPanel.classList.add('d-none');
        filtersToggleBtn.classList.remove('active');
      });

      // Clear filters
      clearFiltersBtn.addEventListener('click', () => {
        document.getElementById('membersFilter').value = '';
        document.getElementById('sortFilter').value = 'votes';

        selectedTags = [];
        tagFilters.forEach(btn => btn.classList.remove('active'));

        activeFilters = {
          members: '',
          sort: 'votes',
          tags: []
        };
      });

      // Enhanced search with filters
      async function handleSearchWithFilters() {
        const query = searchInput.value.trim();
        clearResults();

        if (query.length < 2 && selectedTags.length === 0) {
          searchResults.innerHTML = `
            <div class="alert alert-warning">
              <i class="fas fa-exclamation-circle me-2"></i>
              Wpisz co najmniej 2 znaki lub wybierz tagi
            </div>
          `;
          return;
        }

        const originalBtnContent = searchBtn.innerHTML;
        searchBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status"></span> Szukanie...';
        searchBtn.disabled = true;

        try {
          // Update active filters before sending
          activeFilters = {
            members: document.getElementById('membersFilter').value,
            sort: document.getElementById('sortFilter').value,
            tags: selectedTags
          };

          const response = await fetch(`/servers/find`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ 
              query: query,
              filters: activeFilters
            })
          });

          if (!response.ok) {
            throw new Error(response.status === 429 
              ? 'Za dużo prób wyszukiwania. Spróbuj za chwilę.' 
              : 'Błąd odpowiedzi serwera');
          }

          const data = await response.json();

          if (data.error) {
            throw new Error(data.message);
          }

          displayResults(data);
        } catch (error) {
          console.error('Search error:', error);
          searchResults.innerHTML = `
            <div class="alert alert-danger">
              <i class="fas fa-exclamation-triangle me-2"></i>
              ${error.message || 'Wystąpił błąd podczas wyszukiwania'}
            </div>
          `;
        } finally {
          searchBtn.innerHTML = '<i class="fas fa-search me-2"></i> Szukaj';
          searchBtn.disabled = false;
        }
      }
    });
      </script>

      <!-- Promo scripts -->
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const promotions = [
            {
              link: "https://bit.ly/marvel_rivals_gg3",
              image: "https://discordzik.pl/assets/extra/banner-1500x100-generic.png"
            }
          ];
          const promo = promotions[Math.floor(Math.random() * promotions.length)];
          let promoContainer = document.createElement('div');
          promoContainer.className = 'promo-box';
          let promoLink = document.createElement('a');
          promoLink.href = promo.link;
          promoLink.target = '_blank';
          promoLink.rel = 'noopener noreferrer';
          let promoImage = document.createElement('img');
          promoImage.src = promo.image;
          promoImage.alt = 'Oferta specjalna Discordzik.pl';
          promoImage.style.width = "100%";
          promoImage.loading = "lazy";
          promoLink.appendChild(promoImage);
          promoContainer.appendChild(promoLink);
          let placeholder = document.getElementById('promoPlaceholder');
          if (placeholder) {
            placeholder.appendChild(promoContainer);
          }
        });
      </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const promotions = [
          {
            link: "https://webep1.com/c/12604/67f870e8d10a241ca3ee2eff?bid=67a9e4875c0bd9e7343f5d14&r=aHR0cHM6Ly9yb21ldC5wbC8",
            image: "https://discordzik.pl/assets/extra/romet.png"
          },
          {
            link: "https://webep1.com/c/12040/67f870e8d10a241ca3ee2eff?bid=67acae89db402d1e0115e086&r=aHR0cHM6Ly93d3cuYnJvbi5wbC9waXN0b2xldC1uYS1rdWxlLWd1bW93ZS1pLXBpZXpyb3dlZS1iZWVtYW4tcHJvdGVjdC1icDUwLWNvbWJvLWthbC01MC04LXN0cnphbG93eS1jbzItMTJnLWJwNTBj",
            image: "https://discordzik.pl/assets/extra/bronpl.png"
          },
        {
            link: "https://webep1.com/c/13117/67f870e8d10a241ca3ee2eff?bid=68774d179c4d1c5847b39f53&r=aHR0cHM6Ly9kaWFibG9jaGFpcnMuY29tLw",
            image: "https://discordzik.pl/assets/extra/diablo.png"
          }
        ];

        const promo = promotions[Math.floor(Math.random() * promotions.length)];
        let promoContainer = document.createElement('div');
        promoContainer.className = 'promo-box';

        let promoLink = document.createElement('a');
        promoLink.href = promo.link;
        promoLink.target = '_blank';
        promoLink.rel = 'noopener noreferrer';

        let promoImage = document.createElement('img');
        promoImage.src = promo.image;
        promoImage.alt = 'Oferta specjalna Discordzik.pl';
        promoImage.style.width = "100%";
        promoImage.loading = "lazy";

        promoLink.appendChild(promoImage);
        promoContainer.appendChild(promoLink);

        let placeholder = document.getElementById('promoPlaceholder2');
        if (placeholder) {
          placeholder.appendChild(promoContainer);
        }
      });
    </script>



      <script src="https://analytics.ahrefs.com/analytics.js" data-key="85k+AEmZj3aA6O1yAiFwKg" defer></script>

      <!-- Script dla widgetu niespodzianki -->
      <script>
        let speechBubbleOpen = false;

    // Obsługa kliknięcia w widget
    document.getElementById('surpriseWidget').addEventListener('click', function() {
      if (!speechBubbleOpen) {
        openSpeechBubble();
      }
    });

    function openSpeechBubble() {
      const bubble = document.getElementById('speechBubble');
      const logoContainer = document.querySelector('.logo-container');
      const logoHalf = document.querySelector('.logo-half');

      bubble.classList.add('show');
      // Dodaj klasę dla otwartego stanu
      logoContainer.classList.add('bubble-open');
      logoHalf.classList.add('bubble-open');

      speechBubbleOpen = true;

      // Auto zamknij po 10 sekundach
      setTimeout(() => {
        if (speechBubbleOpen) {
          closeSpeechBubble();
        }
      }, 10000);
    }

    function closeSpeechBubble() {
      const bubble = document.getElementById('speechBubble');
      const logoContainer = document.querySelector('.logo-container');
      const logoHalf = document.querySelector('.logo-half');

      bubble.classList.remove('show');
      // Usuń klasę dla otwartego stanu
      logoContainer.classList.remove('bubble-open');
      logoHalf.classList.remove('bubble-open');

      speechBubbleOpen = false;
    }

        async function surpriseMe() {
          const btn = document.getElementById('surpriseBtn');
          const originalText = btn.innerHTML;

          // Pokaż loading
          btn.innerHTML = '<span class="loading-spinner"></span> Szukam...';
          btn.disabled = true;

          try {
            // Pobierz randomowy serwer
            const response = await fetch('/api/random-server');

            if (!response.ok) {
              throw new Error('Nie udało się pobrać serwera');
            }

            const data = await response.json();

            if (data.success && data.server) {
              // Animacja sukcesu
              btn.innerHTML = '🎉 Znaleziono!';
              btn.style.background = 'linear-gradient(135deg, #10b981, #34d399)';

              setTimeout(() => {
                window.open(`/server/${data.server.serverID}`, '_blank');
                closeSpeechBubble();

                // Resetuj przycisk
                setTimeout(() => {
                  btn.innerHTML = originalText;
                  btn.style.background = '';
                  btn.disabled = false;
                }, 1000);
              }, 800);
            } else {
              throw new Error('Brak dostępnych serwerów');
            }
          } catch (error) {
            console.error('Błąd podczas pobierania randomowego serwera:', error);
            btn.innerHTML = '😅 Spróbuj ponownie';
            btn.style.background = 'linear-gradient(135deg, #ef4444, #f87171)';

            setTimeout(() => {
              btn.innerHTML = originalText;
              btn.style.background = '';
              btn.disabled = false;
            }, 2000);
          }
        }

        // Zamknij dymek po kliknięciu poza nim
        document.addEventListener('click', function(e) {
          const widget = document.getElementById('surpriseWidget');
          const bubble = document.getElementById('speechBubble');

          if (!widget.contains(e.target) && !bubble.contains(e.target) && speechBubbleOpen) {
            closeSpeechBubble();
          }
        });

        // Animacja wejścia widgetu po załadowaniu strony
        document.addEventListener('DOMContentLoaded', function() {
          setTimeout(() => {
            const widget = document.getElementById('surpriseWidget');
            widget.style.transform = 'translateY(-50%) translateX(0)';
            widget.style.transition = 'transform 0.5s ease-out';
            widget.style.opacity = '1';
          }, 2000); // Pojawi się po 2 sekundach
        });
      </script>
    </body>
    </html>